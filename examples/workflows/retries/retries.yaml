name: retries_demo

tasks:
  flakey:
    executor: python
    file: retries.py
    function: flakey
    retries: 2
    input:
      fail_times: 1
    output_type:
      ok: boolean
      attempt: integer

  greet_after_retry:
    executor: python
    file: retries.py
    function: hello
    depends_on: [flakey]
    input:
      name: "after retry"
      delay: 2
    input_type:
      upstream:
        flakey:
          ok: boolean
          attempt: integer
    output_type:
      message: string
      timestamp: number
