name: retries_demo

tasks:
  flakey:
    executor: python
    file: tasks/flakey.py
    retries: 2
    input:
      fail_times: 1
    output_type:
      ok: boolean
      attempt: integer

  greet_after_retry:
    executor: python
    file: tasks/hello.py
    depends_on: [flakey]
    input:
      name: "after retry"
      delay: 2
    input_type:
      upstream:
        flakey:
          ok: boolean
          attempt: integer
    output_type:
      message: string
      timestamp: number
