name: parallel_demo

types:
  HelloOutput:
    message: str
    timestamp: datetime_notz
  ComplimentOutput:
    line: str
    adjective: str

tasks:
  hello_left:
    executor: python
    file: parallel.py
    function: hello
    input_type:
      name: str
      delay: float
    output_type: types.HelloOutput
    inputs:
      name:
        const: left branch
      delay:
        const: 5

  hello_right:
    executor: python
    file: parallel.py
    function: hello
    input_type:
      name: str
      delay: float
    output_type: types.HelloOutput
    inputs:
      name:
        const: right branch
      delay:
        const: 5

  combine:
    executor: python
    file: parallel.py
    function: compliment
    depends_on: [hello_left, hello_right]
    input_type:
      adjective: str
      hello_left: types.HelloOutput
      hello_right: types.HelloOutput
    output_type: types.ComplimentOutput
    inputs:
      adjective:
        const: running in parallel
      hello_left:
        ref: tasks.hello_left.output
      hello_right:
        ref: tasks.hello_right.output
